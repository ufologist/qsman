!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).QsMan=t()}(this,function(){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){var t=e;return(t||null!=t)&&("number"!=typeof t||isFinite(t))||(t=""),String(t)}function c(e){var t=e.indexOf("#");return e.substring(0,-1!==t?t:e.length)}function l(e){var t=[];if(!e)return t;if("string"==typeof e)for(var n=e.split("&"),r=0,i=n.length;r<i;r++){var u=n[r],o=u.indexOf("="),s="",f=void 0;-1!==o?(s=u.substring(0,o),f=u.substring(o+1,u.length)):s=u,s=decodeURIComponent(s),f=void 0!==f?decodeURIComponent(f):"",t.push({key:s,value:f})}else for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&(f=e[s],"[object Array]"===Object.prototype.toString.call(f)?f.forEach(function(e){t.push({key:decodeURIComponent(s),value:decodeURIComponent(a(e))})}):t.push({key:decodeURIComponent(s),value:decodeURIComponent(a(f))}));return t}return function(){function i(e){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this._url=e||"",this._queryStringKvs=l((t=this._url,n=c(t),-1!==(r=n.indexOf("?"))?n.substring(r+1):""))}var e,t,n;return e=i,(t=[{key:"append",value:function(e){var t=l(e);return this._queryStringKvs=this._queryStringKvs.concat(t),this}},{key:"get",value:function(e){return this.getAll(e)[0]}},{key:"getAll",value:function(t){return this._queryStringKvs.filter(function(e){return e.key===t}).map(function(e){return e.value})}},{key:"set",value:function(t,e){var n={};n[t]=e;var r=l(n),i=this._queryStringKvs.filter(function(e){return e.key===t});if(0<i.length){var u=this._queryStringKvs.indexOf(i[0]);this.delete(t);for(var o=this._queryStringKvs.slice(0,u),s=this._queryStringKvs.slice(u+1),f=0,a=r.length;f<a;f++)o.push(r[f]);this._queryStringKvs=o.concat(s)}else this.append(n);return this}},{key:"has",value:function(t){return 0<this._queryStringKvs.filter(function(e){return e.key===t}).length}},{key:"delete",value:function(t){var n=this._queryStringKvs;return n.filter(function(e){return e.key===t}).forEach(function(e){var t=n.indexOf(e);n.splice(t,1)}),this}},{key:"keys",value:function(){return this._queryStringKvs.reduce(function(e,t){return-1===e.indexOf(t.key)&&e.push(t.key),e},[])}},{key:"sort",value:function(){return this._queryStringKvs.sort(function(e,t){return e.key>t.key?1:e.key<t.key?-1:0}),this}},{key:"toString",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t="",n=this._queryStringKvs;n=n.filter(function(e){return""!==e.key}),e||(n=n.filter(function(e){return""!==e.value}));var r,i,u,o=n.map(function(e){return encodeURIComponent(e.key)+"="+encodeURIComponent(e.value)}).join("&");r=this._url,i=c(r),u=i.indexOf("?"),t=i.substring(0,-1!=u?u:i.length),o&&(t=t?t+"?"+o:o);var s,f,a=(s=this._url,-1!==(f=s.indexOf("#"))?s.substring(f+1):"");return a&&(t=t+"#"+a),t}},{key:"replace",value:function(e){for(var t=l(e),n=0,r=t.length;n<r;n++)this.delete(t[n].key);return this.append(e),this}},{key:"getObject",value:function(){return this._queryStringKvs.reduce(function(e,t){var n=t.key,r=t.value,i=e[n];return void 0===i?e[n]=r:"[object Array]"===Object.prototype.toString.apply(i)?i.push(r):e[n]=[i,r],e},{})}}])&&r(e.prototype,t),n&&r(e,n),i}()});
